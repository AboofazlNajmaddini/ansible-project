services:
  ansible-controller:
    build: .
    container_name: ansible-controller
    volumes:
      - .:/ansible
      - /var/run/docker.sock:/var/run/docker.sock
    networks:
      - ansible-net
    command: tail -f /dev/null

  alma1-target:
    image: almalinux:9
    container_name: alma1-target
    privileged: true
    cap_add:
      - SYS_ADMIN
    networks:
      - ansible-net
    command: /usr/sbin/init
  alma2-target:
    image: almalinux:9
    container_name: alma2-target
    privileged: true
    cap_add:
      - SYS_ADMIN
    networks:
      - ansible-net
    command: /usr/sbin/init

networks:
  ansible-net:
    driver: bridge